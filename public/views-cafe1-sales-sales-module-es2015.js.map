{"version":3,"sources":["./src/app/views/cafe1/sales/sales.module.ts","./src/app/views/cafe1/sales/sales.component.html","./src/app/views/cafe1/sales/sales.component.ts","./src/app/views/cafe1/sales/sales-routing.module.ts"],"names":[],"mappings":"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","file":"views-cafe1-sales-sales-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { ChartsModule } from 'ng2-charts';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { ButtonsModule } from 'ngx-bootstrap/buttons';\nimport { TabsModule } from 'ngx-bootstrap/tabs';\n\nimport { SalesComponent } from './sales.component';\nimport { salesRoutingModule } from './sales-routing.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    FormsModule,\n    salesRoutingModule,\n    ChartsModule,\n    BsDropdownModule,\n    TabsModule,\n    ButtonsModule.forRoot(),\n    CommonModule\n  ],\n  declarations: [ SalesComponent ]\n})\nexport class SalesModule {\n\n  sell(){\n    window.print();\n  }\n  cancel(){\n    \n  }\n}\n","export default \"<div class=\\\"animated fadeIn\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-9\\\">\\n        <tabset>\\n          <ng-container *ngFor=\\\"let group of groups\\\">\\n            <tab heading=\\\"{{group.name}}\\\">\\n              <div class=\\\"row\\\">\\n                <div *ngFor=\\\"let prod of products\\\">\\n                  <div class=\\\"float-left\\\" *ngIf=\\\"group.name == prod.payload.val().group && prod.payload.val().cafe1Stock > 0\\\" (click)=\\\"selectProduct(prod.key)\\\">\\n                    <div class=\\\"card\\\" style=\\\"cursor: pointer;\\\">\\n                      <div class=\\\"body\\\">\\n                        <img style=\\\"width: 128px;height: 128px;\\\" src=\\\"{{prod.payload.val().photo}}\\\" class=\\\"rounded float-left\\\" alt=\\\"...\\\">\\n                      </div>\\n                      <div class=\\\"footer\\\" style=\\\"text-align: center;\\\">\\n                        {{ prod.payload.val().name }}\\n                      </div>  \\n                    </div>\\n                  </div>\\n                </div>\\n              </div>\\n            </tab>\\n          </ng-container>\\n        </tabset>\\n      </div>\\n      <div class=\\\"col-md-3\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"card-header\\\">\\n            <i class=\\\"cil-cash\\\"></i> Satılacaklar\\n          </div>\\n          <div class=\\\"card-body\\\">\\n            <div class=\\\"row\\\" id=\\\"printTable\\\">\\n              <table class=\\\"table table-bordered table-striped table-sm\\\" *ngIf=\\\"selectedProd.length > 0\\\">\\n                <thead>\\n                  <tr>\\n                    <th></th>\\n                    <th>Ürün adı</th>\\n                    <th>Adet</th>\\n                    <th>Fiyat</th>\\n                  </tr>\\n                </thead>\\n                <tbody>\\n                  <tr *ngFor=\\\"let item of selectedProd, let i = index\\\">\\n                    <td (click)=\\\"countDecrease(i)\\\" style=\\\"display: table-cell;vertical-align: middle;cursor: pointer;text-align: center;\\\"><i class=\\\"cil-minus\\\" style=\\\"color:red\\\"></i></td>\\n                    <td>{{item.data.name}}</td>\\n                    <td>{{item.count}}</td>\\n                    <td>{{item.totalPrice | number : '.2-2' }}</td>\\n                  </tr>\\n                </tbody>\\n              </table>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-6\\\">\\n                <label>Toplam tutar: </label>\\n              </div>\\n              <div class=\\\"col-6\\\">\\n                <label>{{totalPrice | number : '.2-2' }}</label>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-6\\\">\\n                <label>Alınan para: </label>\\n              </div>\\n              <div class=\\\"col-6\\\">\\n                <div class=\\\"input-prepend input-group\\\">\\n                  <div class=\\\"input-group-prepend\\\">\\n                    <span class=\\\"input-group-text\\\">₺</span>\\n                  </div>\\n                  <input id=\\\"appendedPrependedInput\\\" class=\\\"form-control\\\" size=\\\"16\\\" type=\\\"number\\\" placeholder=\\\"0\\\" name=\\\"alinanPara\\\" [(ngModel)]=\\\"alinanPara\\\">\\n                </div>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-6\\\">\\n                <label>Para üstü: </label>\\n              </div>\\n              <div class=\\\"col-6\\\">\\n                <label *ngIf=\\\"alinanPara-this.totalPrice<0\\\">Eksik para verildi.</label>\\n                <label *ngIf=\\\"alinanPara-this.totalPrice>0\\\">{{alinanPara-totalPrice | number : '.2-2' }}₺</label>\\n                <label *ngIf=\\\"alinanPara-this.totalPrice==0\\\">Ödendi</label>\\n              </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-6\\\">\\n                <button (click)=\\\"sell()\\\" type=\\\"button\\\" class=\\\"btn btn-success btn-square btn-block\\\" [disabled]=\\\"this.totalPrice==0\\\">SAT</button>\\n              </div>\\n              <div class=\\\"col-6\\\">\\n                <button (click)=\\\"cancel()\\\" type=\\\"button\\\" class=\\\"btn btn-danger btn-square btn-block\\\">VAZGEÇ</button>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\";","import { Component, OnInit } from '@angular/core';\nimport { AngularFireDatabase } from '@angular/fire/database';\n\n@Component({\n  selector: 'app-sales',\n  templateUrl: './sales.component.html',\n})\nexport class SalesComponent implements OnInit {\n  groups = [];\n  products =[];\n  group;\n  name;\n  photo;\n  price;\n  stocks;\n  totalPrice = 0;\n  alinanPara;\n  datestring;\n\n  selectedProd = [];\n  selectExist =[];\n  stockDetail = [];\n  \n  exist = false;\n  faturaTarih;\n  receiptId;\n  cost;\n  kdvPrice;\n  receiptExists = false;\n  ngOnInit(){}\n  \n  constructor(private db:AngularFireDatabase){\n    db.list('/groups').valueChanges().subscribe(i => {\n      this.groups = i;\n      this.groups.sort((a, b) => {\n        if (a.name < b.name) return -1\n        return a.name > b.name ? 1 : 0\n      })\n    });\n    \n    db.list(\"/products\").snapshotChanges().forEach(i=>{\n      this.products = i;\n    });\n    this.db.list(\"receipt\").valueChanges().subscribe(x=>{\n      this.db.database.ref(\"receipt\").once('value').then(snapshot=>{\n        if(snapshot.exists()){\n          this.receiptId = snapshot.val().id;\n        }\n        else{\n          this.db.list(\"/receipt\").set('id',0); \n        }\n      });\n    })\n    \n  }\n  countDecrease(index){\n    this.selectedProd[index].count--;\n    this.totalPrice -= this.selectedProd[index].data.kdvPrice;\n    if(this.selectedProd[index].count<=0){\n      this.selectedProd.splice(index,1);\n    }\n    else{\n      this.selectedProd[index].totalPrice = this.selectedProd[index].count * this.selectedProd[index].data.kdvPrice;\n    }\n    if(this.selectedProd.length == 0)\n      this.totalPrice = 0;\n  }\n  selectProduct(key){\n    var iter = 0;\n    this.selectedProd.forEach(i=>{\n      if(key == i.key){\n        this.exist = true;\n        this.selectedProd[iter].count += 1;\n        this.selectedProd[iter].totalPrice = this.selectedProd[iter].count * this.selectedProd[iter].data.kdvPrice;\n        this.totalPrice += this.selectedProd[iter].data.kdvPrice;\n      }\n      iter++;\n    })\n    if(this.exist==false){\n      this.products.forEach(element => { //TODO path ile veri ulaş.\n        \n        if(key == element.key){\n          this.selectedProd.push({data:element.payload.val(), count:1, key:element.key, totalPrice: element.payload.val().kdvPrice,date:0});\n          this.totalPrice += element.payload.val().kdvPrice;\n        }\n      });\n    }\n    this.exist = false;\n  }\n  key;\n  sellCount;\n  sell(){\n    this.totalPrice = 0;\n    const date = new Date();\n    this.faturaTarih = date.toLocaleString('tr-TR');\n    this.receiptId++;\n    var newWin = window.open(\"\");\n    newWin.document.write(\"<!DOCTYPE html><html lang='en'> <head> <meta charset='utf-8'> <title>SKS Fatura</title> <style> body{ width: 80mm; position: relative; display: block; margin: 0px; font-size: 12px; font-weight: bold; text-transform: uppercase; } .container{ margin: 10px; } .title{ text-align: center; margin-top: 4px; } span{ width: 100px; display: inline-block; } hr.dashed { border-top: 1px dashed black; } th{ width: 80px; text-align: left; } .bodyFooter{ position: relative; } .totalText{ width: 81%; } .total{ float: right; width: 19%; } .footer{ } </style> </head> <body> <div class='container'> <div class='head'> <div class='title'>SKS</div> <br> <div><span>PEŞİN MÜŞTERİ</span>&nbsp;&nbsp;</div>\");\n    newWin.document.write(\"</div> <div><span>TARİH</span>:&nbsp;&nbsp;\"+this.faturaTarih+\"</div><div><span>FİŞ NO</span>:&nbsp;&nbsp;\"+this.receiptId+\"</div> </div> <hr class='dashed'> <div class='body'> <table> <tr> <th style='width: 40%;'>ÜRÜN ADI</th> <th style='width: 0px;'></th><th style='width: 0px;'></th> <th>FİYAT</th> <th>ADET</th> <th>TUTAR</th> </tr>\")\n      this.selectedProd.forEach(x=>{\n      this.totalPrice += x.totalPrice;\n      newWin.document.write(\"<tr>\");\n      newWin.document.write(\"<td colspan='3'>\"+x.data.name+\"</td>\");\n      newWin.document.write(\"<td>\"+x.data.kdvPrice.toFixed(2)+\"&nbsp;₺</td>\");\n      newWin.document.write(\"<td>\"+x.count+\"</td>\");\n      newWin.document.write(\"<td>\"+x.totalPrice.toFixed(2)+\"&nbsp;₺</td>\");\n      newWin.document.write(\"</tr>\");\n      x.date = this.faturaTarih;\n      var sellStock = parseFloat(x.data.cafe1Stock) - parseFloat(x.count);\n      this.db.database.ref(\"/products/\"+x.key).update({cafe1Stock:sellStock});\n      //\n      this.products.forEach(element=>{\n        if(x.key == element.key){\n          var cafeStock = x.count;\n          this.stockDetail = element.payload.val().stockDetail;\n          if(element.payload.val().stockDetail != undefined){\n            for (let index = 0; index < this.stockDetail.length; index++) {\n              this.stockDetail[index].stock -= cafeStock;\n              console.log(this.stockDetail[index].stock);\n              if(this.stockDetail[index].stock > 0){\n                break;\n              }\n              else if(this.stockDetail[index].stock == 0){\n                break;\n              }\n              else{\n                cafeStock = -1 * this.stockDetail[index].stock;  \n              }\n            }  \n          }\n          var iter = 0;\n          this.stockDetail.forEach(i=>{\n            if(i.stock <= 0){\n              this.stockDetail.splice(iter, 1);\n            }\n            iter++;\n          })\n          if(this.stockDetail.length > 0){\n            var average = 0;\n            var amount = 0;\n            this.stockDetail.forEach(element => {\n              average += element.cost * element.stock;\n              amount += element.stock;\n            });\n            average = average / amount;\n            this.db.database.ref(\"/products/\"+x.key).update({cost: average, stockDetail:this.stockDetail});\n          }\n          else if(this.stockDetail.length == 1){\n            this.db.database.ref(\"/products/\"+x.key).update({cost: this.stockDetail[0].cost, stockDetail:this.stockDetail});\n          }\n          else{\n            this.db.database.ref(\"/products/\"+x.key).update({cost: 0, stockDetail:this.stockDetail});\n          }\n        }\n      })\n      //\n      this.db.list(\"/statistics/sold\").push({process:\"Kafe 2 satış\", name: x.data.name, group: x.data.group, kdvPrice: x.data.kdvPrice, cost: x.data.cost, count: x.count, date: x.date});\n    })\n    newWin.document.write(\"</table> <hr class='dashed'> <div class='bodyFooter'> <span class='totalText'>TOPLAM TUTAR</span>\");\n    newWin.document.write(\"<span class='total'>\"+this.totalPrice.toFixed(2)+\"&nbsp;₺</span>\");\n    newWin.document.write(\"</div> </div> <hr class='dashed'> <div class='footer'> </div> </div> </body></html>\");\n    newWin.print();  \n    newWin.close();\n    this.totalPrice = 0;  \n    this.selectedProd.splice(0,this.selectedProd.length);\n    this.db.list(\"/receipt\").set('id', this.receiptId);\n    this.alinanPara = 0;\n  }\n  cancel(){\n    this.selectedProd.splice(0,this.selectedProd.length);\n    this.totalPrice = 0;\n    this.alinanPara = 0;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SalesComponent } from './sales.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SalesComponent,\n    data: {\n      title: 'sales'\n    }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class salesRoutingModule {}\n"],"sourceRoot":"webpack:///"}