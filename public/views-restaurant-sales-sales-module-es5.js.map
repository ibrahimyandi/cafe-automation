{"version":3,"sources":["webpack:///src/app/views/restaurant/sales/sales.component.ts","webpack:///src/app/views/restaurant/sales/sales-routing.module.ts","webpack:///src/app/views/restaurant/sales/sales.module.ts","webpack:///src/app/views/restaurant/sales/pipe.ts","webpack:///src/app/views/restaurant/sales/sales.component.html"],"names":["SalesComponent","db","auth","router","table","products","openTable","selectedProd","stockDetail","exist","onAuthStateChanged","user","email","navigate","list","snapshotChanges","forEach","x","valueChanges","subscribe","database","ref","once","then","snapshot","exists","receiptId","val","id","set","process","push","name","length","payload","key","remove","product","undefined","largeModal","show","iter","i","element","restaurant1Stock","count","totalPrice","data","kdvPrice","date","arr","sum","index","splice","update","hide","tableName","Date","faturaTarih","toLocaleString","newWin","window","open","document","write","toFixed","sellStock","parseFloat","cafeStock","stock","average","amount","cost","group","print","close","selector","template","routes","path","component","title","salesRoutingModule","imports","forChild","exports","SalesModule","forRoot","declarations","searchPipe2","value","args","toLowerCase","filter","item","JSON","stringify","includes"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAUaA,cAAc;AAgBzB,gCAAoBC,EAApB,EAA2CC,IAA3C,EAAwEC,MAAxE,EAAqF;AAAA;;AAAA;;AAAjE,eAAAF,EAAA,GAAAA,EAAA;AAAoD,eAAAE,MAAA,GAAAA,MAAA;AAdxE,eAAAC,KAAA,GAAQ,EAAR;AACA,eAAAC,QAAA,GAAW,EAAX;AACA,eAAAC,SAAA,GAAY,EAAZ;AACA,eAAAC,YAAA,GAAe,EAAf;AACA,eAAAC,WAAA,GAAc,EAAd;AAKA,eAAAC,KAAA,GAAQ,KAAR;AAMEP,cAAI,CAACQ,kBAAL,CAAwB,UAACC,IAAD,EAAQ;AAC9B,gBAAGA,IAAH,EAAQ;AACN,kBAAG,CAACA,IAAI,CAACC,KAAL,IAAc,eAAd,IAAiCD,IAAI,CAACC,KAAL,IAAc,eAAhD,KAAoE,KAAvE,EAA6E;AAC3ET,sBAAM,CAACU,QAAP,CAAgB,CAAC,QAAD,CAAhB;AACD;AACF;AACF,WAND;AAOA,eAAKZ,EAAL,CAAQa,IAAR,CAAa,WAAb,EAA0BC,eAA1B,GAA4CC,OAA5C,CAAoD,UAAAC,CAAC,EAAE;AACrD,iBAAI,CAACZ,QAAL,GAAgBY,CAAhB;AACD,WAFD;AAGA,eAAKhB,EAAL,CAAQa,IAAR,CAAa,oBAAb,EAAmCC,eAAnC,GAAqDC,OAArD,CAA6D,UAAAC,CAAC,EAAE;AAC9D,iBAAI,CAACb,KAAL,GAAaa,CAAb;AACD,WAFD;AAGA,eAAKhB,EAAL,CAAQa,IAAR,CAAa,SAAb,EAAwBI,YAAxB,GAAuCC,SAAvC,CAAiD,UAAAF,CAAC,EAAE;AAClD,iBAAI,CAAChB,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,SAArB,EAAgCC,IAAhC,CAAqC,OAArC,EAA8CC,IAA9C,CAAmD,UAAAC,QAAQ,EAAE;AAC3D,kBAAGA,QAAQ,CAACC,MAAT,EAAH,EAAqB;AACnB,qBAAI,CAACC,SAAL,GAAiBF,QAAQ,CAACG,GAAT,GAAeC,EAAhC;AACD,eAFD,MAGI;AACF,qBAAI,CAAC3B,EAAL,CAAQa,IAAR,CAAa,UAAb,EAAyBe,GAAzB,CAA6B,IAA7B,EAAkC,CAAlC;AACD;AACF,aAPD;AAQD,WATD;AAUD;;AAxCwB;AAAA;AAAA,iBAczB,oBAAQ,CAAI;AAda;AAAA;AAAA,iBAyCzB,mBAAUC,OAAV,EAAiB;AACf,gBAAGA,OAAO,IAAI,CAAd,EAAgB;AACd,mBAAK7B,EAAL,CAAQa,IAAR,CAAa,oBAAb,EAAmCiB,IAAnC,CAAwC;AAACC,oBAAI,EAAC,KAAK5B,KAAL,CAAW6B,MAAX,GAAkB;AAAxB,eAAxC;AACD,aAFD,MAGI;AACF,mBAAKhC,EAAL,CAAQa,IAAR,CAAa,wBAAsB,KAAKV,KAAL,CAAW,KAAKA,KAAL,CAAW6B,MAAX,GAAkB,CAA7B,EAAgCC,OAAhC,CAAwCC,GAA3E,EAAgFC,MAAhF;AACD;AACF;AAhDwB;AAAA;AAAA,iBAiDzB,mBAAUD,GAAV,EAAa;AAAA;;AACX,iBAAK/B,KAAL,CAAWY,OAAX,CAAmB,UAAAC,CAAC,EAAE;AACpB,kBAAGA,CAAC,CAACiB,OAAF,CAAUC,GAAV,IAAiBA,GAApB,EAAwB;AACtB,oBAAGlB,CAAC,CAACiB,OAAF,CAAUP,GAAV,GAAgBU,OAAhB,IAA2BC,SAA9B,EACE,MAAI,CAAC/B,YAAL,GAAoB,EAApB,CADF,KAGE,MAAI,CAACA,YAAL,GAAoBU,CAAC,CAACiB,OAAF,CAAUP,GAAV,GAAgBU,OAApC;AACH;AACF,aAPD;AAQA,iBAAKE,UAAL,CAAgBC,IAAhB;AACA,iBAAKL,GAAL,GAAWA,GAAX;AACD;AA5DwB;AAAA;AAAA,iBA6DzB,uBAAcA,GAAd,EAAiB;AAAA;;AACf,gBAAIM,IAAI,GAAG,CAAX;AACA,iBAAKlC,YAAL,CAAkBS,OAAlB,CAA0B,UAAA0B,CAAC,EAAE;AAC3B,oBAAI,CAACrC,QAAL,CAAcW,OAAd,CAAsB,UAAA2B,OAAO,EAAI;AAC/B,oBAAGR,GAAG,IAAIO,CAAC,CAACP,GAAT,IAAgBQ,OAAO,CAACR,GAAR,IAAeA,GAAlC,EAAsC;AACpC,sBAAGQ,OAAO,CAACT,OAAR,CAAgBP,GAAhB,GAAsBiB,gBAAtB,GAAyC,MAAI,CAACrC,YAAL,CAAkBkC,IAAlB,EAAwBI,KAApE,EAA0E;AACxE,0BAAI,CAACtC,YAAL,CAAkBkC,IAAlB,EAAwBI,KAAxB,IAAiC,CAAjC;AACA,0BAAI,CAACtC,YAAL,CAAkBkC,IAAlB,EAAwBK,UAAxB,GAAqC,MAAI,CAACvC,YAAL,CAAkBkC,IAAlB,EAAwBI,KAAxB,GAAgC,MAAI,CAACtC,YAAL,CAAkBkC,IAAlB,EAAwBM,IAAxB,CAA6BC,QAAlG;AACA,0BAAI,CAACF,UAAL,IAAmB,MAAI,CAACvC,YAAL,CAAkBkC,IAAlB,EAAwBM,IAAxB,CAA6BC,QAAhD;AACD;;AACD,wBAAI,CAACvC,KAAL,GAAa,IAAb;AACD;AACF,eATD;;AAUAgC,kBAAI;AACL,aAZD;;AAaA,gBAAG,KAAKhC,KAAL,IAAY,KAAf,EAAqB;AACnB,mBAAKJ,QAAL,CAAcW,OAAd,CAAsB,UAAA2B,OAAO,EAAI;AAC/B,oBAAGR,GAAG,IAAIQ,OAAO,CAACR,GAAlB,EAAsB;AACpB,wBAAI,CAAC5B,YAAL,CAAkBwB,IAAlB,CAAuB;AAACgB,wBAAI,EAACJ,OAAO,CAACT,OAAR,CAAgBP,GAAhB,EAAN;AAA6BkB,yBAAK,EAAC,CAAnC;AAAsCV,uBAAG,EAACQ,OAAO,CAACR,GAAlD;AAAuDW,8BAAU,EAAEH,OAAO,CAACT,OAAR,CAAgBP,GAAhB,GAAsBqB,QAAzF;AAAkGC,wBAAI,EAAC;AAAvG,mBAAvB;;AACA,wBAAI,CAACH,UAAL,IAAmBH,OAAO,CAACT,OAAR,CAAgBP,GAAhB,GAAsBqB,QAAzC;AACD;AACF,eALD;AAMD;;AACD,iBAAKvC,KAAL,GAAa,KAAb;AACD;AArFwB;AAAA;AAAA,iBAsFzB,gBAAOyC,GAAP,EAAU;AACR,gBAAIC,GAAG,GAAG,CAAV;;AACA,gBAAGD,GAAG,IAAIZ,SAAV,EAAoB;AAClB,mBAAI,IAAII,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGQ,GAAG,CAACjB,MAAvB,EAA+BS,CAAC,EAAhC,EAAoC;AAClCS,mBAAG,IAAID,GAAG,CAACR,CAAD,CAAH,CAAOI,UAAd;AACD;AACF;;AACD,mBAAOK,GAAP;AACD;AA9FwB;AAAA;AAAA,iBA+FzB,uBAAcC,KAAd,EAAmB;AACjB,iBAAK7C,YAAL,CAAkB6C,KAAlB,EAAyBP,KAAzB;AACA,iBAAKC,UAAL,IAAmB,KAAKvC,YAAL,CAAkB6C,KAAlB,EAAyBL,IAAzB,CAA8BC,QAAjD;;AACA,gBAAG,KAAKzC,YAAL,CAAkB6C,KAAlB,EAAyBP,KAAzB,IAAgC,CAAnC,EAAqC;AACnC,mBAAKtC,YAAL,CAAkB8C,MAAlB,CAAyBD,KAAzB,EAA+B,CAA/B;AACD,aAFD,MAGI;AACF,mBAAK7C,YAAL,CAAkB6C,KAAlB,EAAyBN,UAAzB,GAAsC,KAAKvC,YAAL,CAAkB6C,KAAlB,EAAyBP,KAAzB,GAAiC,KAAKtC,YAAL,CAAkB6C,KAAlB,EAAyBL,IAAzB,CAA8BC,QAArG;AACD;;AACD,gBAAG,KAAKzC,YAAL,CAAkB0B,MAAlB,IAA4B,CAA/B,EACE,KAAKa,UAAL,GAAkB,CAAlB;AACH;AA1GwB;AAAA;AAAA,iBA2GzB,sBAAU;AACR,iBAAK7C,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,wBAAsB,KAAKc,GAAhD,EAAqDmB,MAArD,CAA4D;AAACjB,qBAAO,EAAC,KAAK9B;AAAd,aAA5D;AACA,iBAAKgC,UAAL,CAAgBgB,IAAhB;AACA,iBAAKpB,GAAL,GAAW,IAAX;AACA,iBAAK5B,YAAL,GAAoB,EAApB;AACD;AAhHwB;AAAA;AAAA,iBAkHzB,cAAK4B,GAAL,EAAQ;AAAA;;AACN,iBAAK/B,KAAL,CAAWY,OAAX,CAAmB,UAAAC,CAAC,EAAE;AACpB,kBAAGA,CAAC,CAACiB,OAAF,CAAUC,GAAV,IAAiBA,GAApB,EAAwB;AACtB,sBAAI,CAAC5B,YAAL,GAAoBU,CAAC,CAACiB,OAAF,CAAUP,GAAV,GAAgBU,OAApC;AACA,sBAAI,CAACmB,SAAL,GAAiBvC,CAAC,CAACiB,OAAF,CAAUP,GAAV,GAAgBK,IAAjC;AACD;AACF,aALD;AAMA,iBAAKc,UAAL,GAAkB,CAAlB;AACA,gBAAMG,IAAI,GAAG,IAAIQ,IAAJ,EAAb;AACA,iBAAKC,WAAL,GAAmBT,IAAI,CAACU,cAAL,CAAoB,OAApB,CAAnB;AACA,iBAAKjC,SAAL;AACA,gBAAIkC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAY,EAAZ,CAAb;AACAF,kBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,0qBAAwqB,KAAKR,SAA7qB,GAAurB,QAA7sB;AACAI,kBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,gDAA8C,KAAKN,WAAnD,GAA+D,6CAA/D,GAA6G,KAAKhC,SAAlH,GAA4H,sNAAlJ;AACA,iBAAKnB,YAAL,CAAkBS,OAAlB,CAA0B,UAAAC,CAAC,EAAE;AAC3B,oBAAI,CAAC6B,UAAL,IAAmB7B,CAAC,CAAC6B,UAArB;AACAc,oBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,MAAtB;AACAJ,oBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,qBAAmB/C,CAAC,CAAC8B,IAAF,CAAOf,IAA1B,GAA+B,OAArD;AACA4B,oBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,SAAO/C,CAAC,CAAC8B,IAAF,CAAOC,QAAP,CAAgBiB,OAAhB,CAAwB,CAAxB,CAAP,GAAkC,cAAxD;AACAL,oBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,SAAO/C,CAAC,CAAC4B,KAAT,GAAe,OAArC;AACAe,oBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,SAAO/C,CAAC,CAAC6B,UAAF,CAAamB,OAAb,CAAqB,CAArB,CAAP,GAA+B,cAArD;AACAL,oBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,OAAtB;AACA/C,eAAC,CAACgC,IAAF,GAAS,MAAI,CAACS,WAAd;AACA,kBAAIQ,SAAS,GAAGC,UAAU,CAAClD,CAAC,CAAC8B,IAAF,CAAOH,gBAAR,CAAV,GAAsCuB,UAAU,CAAClD,CAAC,CAAC4B,KAAH,CAAhE;;AACA,oBAAI,CAAC5C,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,eAAaJ,CAAC,CAACkB,GAApC,EAAyCmB,MAAzC,CAAgD;AAACV,gCAAgB,EAACsB;AAAlB,eAAhD;;AACA,oBAAI,CAAC7D,QAAL,CAAcW,OAAd,CAAsB,UAAA2B,OAAO,EAAE;AAC7B,oBAAG1B,CAAC,CAACkB,GAAF,IAASQ,OAAO,CAACR,GAApB,EAAwB;AACtB,sBAAIiC,SAAS,GAAGnD,CAAC,CAAC4B,KAAlB;AACA,wBAAI,CAACrC,WAAL,GAAmBmC,OAAO,CAACT,OAAR,CAAgBP,GAAhB,GAAsBnB,WAAzC;;AACA,sBAAGmC,OAAO,CAACT,OAAR,CAAgBP,GAAhB,GAAsBnB,WAAtB,IAAqC8B,SAAxC,EAAkD;AAChD,yBAAK,IAAIc,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,MAAI,CAAC5C,WAAL,CAAiByB,MAA7C,EAAqDmB,KAAK,EAA1D,EAA8D;AAC5D,4BAAI,CAAC5C,WAAL,CAAiB4C,KAAjB,EAAwBiB,KAAxB,IAAiCD,SAAjC;;AACA,0BAAG,MAAI,CAAC5D,WAAL,CAAiB4C,KAAjB,EAAwBiB,KAAxB,GAAgC,CAAnC,EAAqC;AACnC;AACD,uBAFD,MAGK,IAAG,MAAI,CAAC7D,WAAL,CAAiB4C,KAAjB,EAAwBiB,KAAxB,IAAiC,CAApC,EAAsC;AACzC;AACD,uBAFI,MAGD;AACFD,iCAAS,GAAG,CAAC,CAAD,GAAK,MAAI,CAAC5D,WAAL,CAAiB4C,KAAjB,EAAwBiB,KAAzC;AACD;AACF;AACF;;AACD,sBAAI5B,IAAI,GAAG,CAAX;;AACA,wBAAI,CAACjC,WAAL,CAAiBQ,OAAjB,CAAyB,UAAA0B,CAAC,EAAE;AAC1B,wBAAGA,CAAC,CAAC2B,KAAF,IAAW,CAAd,EAAgB;AACd,4BAAI,CAAC7D,WAAL,CAAiB6C,MAAjB,CAAwBZ,IAAxB,EAA8B,CAA9B;AACD;;AACDA,wBAAI;AACL,mBALD;;AAMA,sBAAG,MAAI,CAACjC,WAAL,CAAiByB,MAAjB,GAA0B,CAA7B,EAA+B;AAC7B,wBAAIqC,OAAO,GAAG,CAAd;AACA,wBAAIC,MAAM,GAAG,CAAb;;AACA,0BAAI,CAAC/D,WAAL,CAAiBQ,OAAjB,CAAyB,UAAA2B,OAAO,EAAI;AAClC2B,6BAAO,IAAI3B,OAAO,CAAC6B,IAAR,GAAe7B,OAAO,CAAC0B,KAAlC;AACAE,4BAAM,IAAI5B,OAAO,CAAC0B,KAAlB;AACD,qBAHD;;AAIAC,2BAAO,GAAGA,OAAO,GAAGC,MAApB;;AACA,0BAAI,CAACtE,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,eAAaJ,CAAC,CAACkB,GAApC,EAAyCmB,MAAzC,CAAgD;AAACkB,0BAAI,EAAEF,OAAP;AAAgB9D,iCAAW,EAAC,MAAI,CAACA;AAAjC,qBAAhD;AACD,mBATD,MAUK,IAAG,MAAI,CAACA,WAAL,CAAiByB,MAAjB,IAA2B,CAA9B,EAAgC;AACnC,0BAAI,CAAChC,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,eAAaJ,CAAC,CAACkB,GAApC,EAAyCmB,MAAzC,CAAgD;AAACkB,0BAAI,EAAE,MAAI,CAAChE,WAAL,CAAiB,CAAjB,EAAoBgE,IAA3B;AAAiChE,iCAAW,EAAC,MAAI,CAACA;AAAlD,qBAAhD;AACD,mBAFI,MAGD;AACF,0BAAI,CAACP,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,eAAaJ,CAAC,CAACkB,GAApC,EAAyCmB,MAAzC,CAAgD;AAACkB,0BAAI,EAAE,CAAP;AAAUhE,iCAAW,EAAC,MAAI,CAACA;AAA3B,qBAAhD;AACD;AACF;AACF,eA1CD;;AA2CA,oBAAI,CAACP,EAAL,CAAQa,IAAR,CAAa,kBAAb,EAAiCiB,IAAjC,CAAsC;AAACD,uBAAO,EAAC,kBAAT;AAA6BE,oBAAI,EAAEf,CAAC,CAAC8B,IAAF,CAAOf,IAA1C;AAAgDyC,qBAAK,EAAExD,CAAC,CAAC8B,IAAF,CAAO0B,KAA9D;AAAqEzB,wBAAQ,EAAE/B,CAAC,CAAC8B,IAAF,CAAOC,QAAtF;AAAgGwB,oBAAI,EAAEvD,CAAC,CAAC8B,IAAF,CAAOyB,IAA7G;AAAmH3B,qBAAK,EAAE5B,CAAC,CAAC4B,KAA5H;AAAmII,oBAAI,EAAEhC,CAAC,CAACgC;AAA3I,eAAtC;AACD,aAvDD;AAwDAW,kBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,mGAAtB;AACAJ,kBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,yBAAuB,KAAKlB,UAAL,CAAgBmB,OAAhB,CAAwB,CAAxB,CAAvB,GAAkD,gBAAxE;AACAL,kBAAM,CAACG,QAAP,CAAgBC,KAAhB,CAAsB,qFAAtB;AACAJ,kBAAM,CAACc,KAAP;AACAd,kBAAM,CAACe,KAAP;AACA,iBAAK7B,UAAL,GAAkB,CAAlB;AACA,iBAAK7C,EAAL,CAAQmB,QAAR,CAAiBC,GAAjB,CAAqB,wBAAsBc,GAAtB,GAA0B,UAA/C,EAA2DC,MAA3D;AACA,iBAAKnC,EAAL,CAAQa,IAAR,CAAa,UAAb,EAAyBe,GAAzB,CAA6B,IAA7B,EAAmC,KAAKH,SAAxC;AACD;AAhMwB;;AAAA;AAAA,S;;;;gBATlB;;gBAEA;;gBACA;;;;;;gBAON,uD;AAAS,iBAAC,YAAD;;;AADC1B,oBAAc,6DAJ1B,gEAAU;AACT4E,gBAAQ,EAAE,WADD;AAETC,gBAAQ,EAAR;AAFS,OAAV,CAI0B,E,+EAgBF,0E,EAAyB,kE,EAA+B,sD,EAhBtD,GAAd7E,cAAc,CAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLb,UAAM8E,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE,+DAFb;AAGEjC,YAAI,EAAE;AACJkC,eAAK,EAAE;AADH;AAHR,OADqB,CAAvB;;UAcaC,kBAAkB;AAAA;AAAA,Q;;AAAlBA,wBAAkB,6DAJ9B,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBN,MAAtB,CAAD,CADD;AAERO,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAI8B,GAAlBH,kBAAkB,CAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCOAI,WAAW;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iBAEtB,gBAAI;AACFzB,kBAAM,CAACa,KAAP;AACD;AAJqB;AAAA;AAAA,iBAKtB,kBAAM,CAEL;AAPqB;;AAAA;AAAA,S;;AAAXY,iBAAW,6DAbvB,+DAAS;AACRH,eAAO,EAAE,CACP,0DADO,EAEP,wEAFO,EAGP,uDAHO,EAIP,uEAJO,EAKP,6DALO,EAMP,+DANO,EAOP,oEAAcI,OAAd,EAPO,EAQP,6DARO,CADD;AAWRC,oBAAY,EAAE,CAAE,+DAAF,EAAiB,kDAAjB;AAXN,OAAT,CAauB,GAAXF,WAAW,CAAX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCpBAG,WAAW;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,iBACpB,mBAAUC,KAAV,EAAsBC,IAAtB,EAAgC;AAE5B,gBAAG,CAACD,KAAJ,EAAU,OAAO,IAAP;AACV,gBAAG,CAACC,IAAJ,EAAS,OAAOD,KAAP;AAETC,gBAAI,GAAGA,IAAI,CAACC,WAAL,EAAP;AAEA,mBAAOF,KAAK,CAACG,MAAN,CAAa,UAASC,IAAT,EAAa;AAC7B,qBAAOC,IAAI,CAACC,SAAL,CAAeF,IAAf,EAAqBF,WAArB,GAAmCK,QAAnC,CAA4CN,IAA5C,CAAP;AACH,aAFM,CAAP;AAGH;AAXmB;;AAAA;AAAA,S;;AAAXF,iBAAW,6DAJvB,2DAAK;AACFzD,YAAI,EAAE;AADJ,OAAL,CAIuB,GAAXyD,WAAW,CAAX;;;;;;;;;;;;;;;;ACNb;AAAe;;;AAAA","file":"views-restaurant-sales-sales-module-es5.js","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { ModalDirective } from 'ngx-bootstrap/modal';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-sales',\r\n  templateUrl: './sales.component.html',\r\n})\r\nexport class SalesComponent implements OnInit {\r\n  @ViewChild('largeModal') public largeModal: ModalDirective;\r\n  table = [];\r\n  products = [];\r\n  openTable = [];\r\n  selectedProd = [];\r\n  stockDetail = [];\r\n  tableName;\r\n  faturaTarih;\r\n  receiptId;\r\n  totalPrice;\r\n  exist = false;\r\n  search;\r\n  key;\r\n  ngOnInit(){}\r\n  \r\n  constructor(private db:AngularFireDatabase,auth:AngularFireAuth,private router:Router){\r\n    auth.onAuthStateChanged((user)=>{\r\n      if(user){\r\n        if((user.email == \"cafe2@sks.com\" || user.email == \"admin@sks.com\") == false){\r\n          router.navigate([\"/stock\"]);\r\n        }\r\n      }\r\n    })\r\n    this.db.list(\"/products\").snapshotChanges().forEach(x=>{\r\n      this.products = x;\r\n    })\r\n    this.db.list(\"/restaurant1/table\").snapshotChanges().forEach(x=>{\r\n      this.table = x;\r\n    })\r\n    this.db.list(\"receipt\").valueChanges().subscribe(x=>{\r\n      this.db.database.ref(\"receipt\").once('value').then(snapshot=>{\r\n        if(snapshot.exists()){\r\n          this.receiptId = snapshot.val().id;\r\n        }\r\n        else{\r\n          this.db.list(\"/receipt\").set('id',0); \r\n        }\r\n      });\r\n    })\r\n  }\r\n  tableEdit(process){\r\n    if(process == 1){\r\n      this.db.list(\"/restaurant1/table\").push({name:this.table.length+1});\r\n    }\r\n    else{\r\n      this.db.list(\"/restaurant1/table/\"+this.table[this.table.length-1].payload.key).remove();\r\n    }\r\n  }\r\n  modalOpen(key){\r\n    this.table.forEach(x=>{\r\n      if(x.payload.key == key){\r\n        if(x.payload.val().product == undefined)\r\n          this.selectedProd = [];\r\n        else\r\n          this.selectedProd = x.payload.val().product;\r\n      }\r\n    })\r\n    this.largeModal.show();\r\n    this.key = key;\r\n  }\r\n  selectProduct(key){\r\n    var iter = 0;\r\n    this.selectedProd.forEach(i=>{\r\n      this.products.forEach(element => {\r\n        if(key == i.key && element.key == key){\r\n          if(element.payload.val().restaurant1Stock > this.selectedProd[iter].count){\r\n            this.selectedProd[iter].count += 1;\r\n            this.selectedProd[iter].totalPrice = this.selectedProd[iter].count * this.selectedProd[iter].data.kdvPrice;\r\n            this.totalPrice += this.selectedProd[iter].data.kdvPrice;\r\n          }\r\n          this.exist = true;\r\n        }\r\n      });\r\n      iter++;\r\n    })\r\n    if(this.exist==false){\r\n      this.products.forEach(element => {\r\n        if(key == element.key){\r\n          this.selectedProd.push({data:element.payload.val(), count:1, key:element.key, totalPrice: element.payload.val().kdvPrice,date:0});\r\n          this.totalPrice += element.payload.val().kdvPrice;\r\n        }\r\n      });\r\n    }\r\n    this.exist = false;\r\n  }\r\n  getSum(arr){\r\n    let sum = 0;\r\n    if(arr != undefined){\r\n      for(let i = 0; i < arr.length; i++) {\r\n        sum += arr[i].totalPrice;\r\n      }\r\n    }\r\n    return sum;\r\n  }\r\n  countDecrease(index){\r\n    this.selectedProd[index].count--;\r\n    this.totalPrice -= this.selectedProd[index].data.kdvPrice;\r\n    if(this.selectedProd[index].count<=0){\r\n      this.selectedProd.splice(index,1);\r\n    }\r\n    else{\r\n      this.selectedProd[index].totalPrice = this.selectedProd[index].count * this.selectedProd[index].data.kdvPrice;\r\n    }\r\n    if(this.selectedProd.length == 0)\r\n      this.totalPrice = 0;\r\n  }\r\n  addProduct(){\r\n    this.db.database.ref(\"/restaurant1/table/\"+this.key).update({product:this.selectedProd});\r\n    this.largeModal.hide();\r\n    this.key = null;\r\n    this.selectedProd = [];\r\n  }\r\n\r\n  sell(key){\r\n    this.table.forEach(x=>{\r\n      if(x.payload.key == key){\r\n        this.selectedProd = x.payload.val().product;\r\n        this.tableName = x.payload.val().name;\r\n      }\r\n    })\r\n    this.totalPrice = 0;\r\n    const date = new Date();\r\n    this.faturaTarih = date.toLocaleString('tr-TR');\r\n    this.receiptId++;\r\n    var newWin = window.open(\"\");\r\n    newWin.document.write(\"<!DOCTYPE html><html lang='en'> <head> <meta charset='utf-8'> <title>SKS Fatura</title> <style> body{ width: 80mm; position: relative; display: block; margin: 0px; font-size: 12px; font-weight: bold; text-transform: uppercase; } .container{ margin: 10px; } .title{ text-align: center; margin-top: 4px; } span{ width: 100px; display: inline-block; } hr.dashed { border-top: 1px dashed black; } th{ width: 80px; text-align: left; } .bodyFooter{ position: relative; } .totalText{ width: 81%; } .total{ float: right; width: 19%; } .footer{ } </style> </head> <body> <div class='container'> <div class='head'> <div class='title'>SKS</div> <br> <div><span>MASA NO</span>:&nbsp;&nbsp;\"+this.tableName+\"</div>\");\r\n    newWin.document.write(\"</div> <div><span>TARİH</span>:&nbsp;&nbsp;\"+this.faturaTarih+\"</div><div><span>FİŞ NO</span>:&nbsp;&nbsp;\"+this.receiptId+\"</div> </div> <hr class='dashed'> <div class='body'> <table> <tr> <th style='width: 40%;'>ÜRÜN ADI</th> <th style='width: 0px;'></th><th style='width: 0px;'></th> <th>FİYAT</th> <th>ADET</th> <th>TUTAR</th> </tr>\")\r\n    this.selectedProd.forEach(x=>{\r\n      this.totalPrice += x.totalPrice;\r\n      newWin.document.write(\"<tr>\");\r\n      newWin.document.write(\"<td colspan='3'>\"+x.data.name+\"</td>\");\r\n      newWin.document.write(\"<td>\"+x.data.kdvPrice.toFixed(2)+\"&nbsp;₺</td>\");\r\n      newWin.document.write(\"<td>\"+x.count+\"</td>\");\r\n      newWin.document.write(\"<td>\"+x.totalPrice.toFixed(2)+\"&nbsp;₺</td>\");\r\n      newWin.document.write(\"</tr>\");\r\n      x.date = this.faturaTarih;\r\n      var sellStock = parseFloat(x.data.restaurant1Stock) - parseFloat(x.count);\r\n      this.db.database.ref(\"/products/\"+x.key).update({restaurant1Stock:sellStock});\r\n      this.products.forEach(element=>{\r\n        if(x.key == element.key){\r\n          var cafeStock = x.count;\r\n          this.stockDetail = element.payload.val().stockDetail;\r\n          if(element.payload.val().stockDetail != undefined){\r\n            for (let index = 0; index < this.stockDetail.length; index++) {\r\n              this.stockDetail[index].stock -= cafeStock;\r\n              if(this.stockDetail[index].stock > 0){\r\n                break;\r\n              }\r\n              else if(this.stockDetail[index].stock == 0){\r\n                break;\r\n              }\r\n              else{\r\n                cafeStock = -1 * this.stockDetail[index].stock;  \r\n              }\r\n            }  \r\n          }\r\n          var iter = 0;\r\n          this.stockDetail.forEach(i=>{\r\n            if(i.stock <= 0){\r\n              this.stockDetail.splice(iter, 1);\r\n            }\r\n            iter++;\r\n          })\r\n          if(this.stockDetail.length > 0){\r\n            var average = 0;\r\n            var amount = 0;\r\n            this.stockDetail.forEach(element => {\r\n              average += element.cost * element.stock;\r\n              amount += element.stock;\r\n            });\r\n            average = average / amount;\r\n            this.db.database.ref(\"/products/\"+x.key).update({cost: average, stockDetail:this.stockDetail});\r\n          }\r\n          else if(this.stockDetail.length == 1){\r\n            this.db.database.ref(\"/products/\"+x.key).update({cost: this.stockDetail[0].cost, stockDetail:this.stockDetail});\r\n          }\r\n          else{\r\n            this.db.database.ref(\"/products/\"+x.key).update({cost: 0, stockDetail:this.stockDetail});\r\n          }\r\n        }\r\n      })\r\n      this.db.list(\"/statistics/sold\").push({process:\"Restoran 1 satış\", name: x.data.name, group: x.data.group, kdvPrice: x.data.kdvPrice, cost: x.data.cost, count: x.count, date: x.date});\r\n    })\r\n    newWin.document.write(\"</table> <hr class='dashed'> <div class='bodyFooter'> <span class='totalText'>TOPLAM TUTAR</span>\");\r\n    newWin.document.write(\"<span class='total'>\"+this.totalPrice.toFixed(2)+\"&nbsp;₺</span>\");\r\n    newWin.document.write(\"</div> </div> <hr class='dashed'> <div class='footer'> </div> </div> </body></html>\");\r\n    newWin.print();  \r\n    newWin.close();\r\n    this.totalPrice = 0;  \r\n    this.db.database.ref(\"/restaurant1/table/\"+key+\"/product\").remove();\r\n    this.db.list(\"/receipt\").set('id', this.receiptId);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SalesComponent } from './sales.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SalesComponent,\r\n    data: {\r\n      title: 'sales'\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class salesRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ChartsModule } from 'ng2-charts';\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { ButtonsModule } from 'ngx-bootstrap/buttons';\r\nimport { TabsModule } from 'ngx-bootstrap/tabs';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\n\r\nimport { SalesComponent } from './sales.component';\r\nimport { salesRoutingModule } from './sales-routing.module';\r\nimport { CommonModule } from '@angular/common';\r\nimport { searchPipe2 } from './pipe';\r\n\r\n@NgModule({\r\n  imports: [\r\n    FormsModule,\r\n    salesRoutingModule,\r\n    ChartsModule,\r\n    BsDropdownModule,\r\n    TabsModule,\r\n    ModalModule,\r\n    ButtonsModule.forRoot(),\r\n    CommonModule\r\n  ],\r\n  declarations: [ SalesComponent,searchPipe2 ]\r\n})\r\nexport class SalesModule {\r\n\r\n  sell(){\r\n    window.print();\r\n  }\r\n  cancel(){\r\n    \r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'filter'\r\n})\r\n\r\nexport class searchPipe2 implements PipeTransform {\r\n    transform(value: any, args?: any): any {\r\n\r\n        if(!value)return null;\r\n        if(!args)return value;\r\n\r\n        args = args.toLowerCase();\r\n\r\n        return value.filter(function(item){\r\n            return JSON.stringify(item).toLowerCase().includes(args);\r\n        });\r\n    }\r\n}","export default \"<div class=\\\"animated fadeIn\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-12\\\">\\r\\n      <div class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\">\\r\\n          Masaları düzenle\\r\\n        </div>\\r\\n        <div class=\\\"card-body\\\">\\r\\n          <button class=\\\"btn btn-primary\\\" type=\\\"submit\\\" (click)=\\\"tableEdit(1)\\\">Masa ekle</button>\\r\\n          <button class=\\\"btn btn-primary\\\" type=\\\"submit\\\" (click)=\\\"tableEdit(0)\\\">Masa çıkar</button>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"col-12\\\">\\r\\n      <div class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\">\\r\\n          Masalar\\r\\n        </div>\\r\\n        <div class=\\\"card-body row\\\">\\r\\n          <div class=\\\"col-md-4\\\" *ngFor=\\\"let item of table\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n              <div class=\\\"card-header\\\">\\r\\n                <div class=\\\"row\\\">\\r\\n                  <div class=\\\"col-9\\\">Masa {{ item.payload.val().name }}</div>\\r\\n                  <div class=\\\"col-3\\\">\\r\\n                      <span style=\\\"float:right;height: 25px;\\r\\n                      width: 25px;\\r\\n                      border-radius: 50%;\\r\\n                      \\\" [ngStyle]=\\\"{'background-color': (item.payload.val().product != undefined) ? '#dc3545' : '#28a745'}\\\"></span>\\r\\n                  </div>  \\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"card-body\\\">\\r\\n                <h6 class=\\\"card-title\\\">Ürün listesi</h6>\\r\\n                <table class=\\\"table\\\">\\r\\n                  <thead>\\r\\n                    <tr>\\r\\n                      <th scope=\\\"col\\\">Ürün</th>\\r\\n                      <th scope=\\\"col\\\">Adet</th>\\r\\n                      <th scope=\\\"col\\\">Tutar</th>\\r\\n                    </tr>\\r\\n                  </thead>\\r\\n                  <tbody>\\r\\n                    <tr *ngFor=\\\"let prod of item.payload.val().product\\\">\\r\\n                      <td>{{ prod.data.name }}</td>\\r\\n                      <td>{{ prod.count }}</td>\\r\\n                      <td>{{ prod.totalPrice | number : '.2-2' }}</td>\\r\\n                    </tr>\\r\\n                    <tr>\\r\\n                      <td colspan=\\\"2\\\">Toplam tutar</td>\\r\\n                      <td>{{ getSum(item.payload.val().product) | number : '.2-2' }}</td>\\r\\n                    </tr>\\r\\n                  </tbody>\\r\\n                </table>\\r\\n              </div>\\r\\n              <div class=\\\"card-footer\\\">\\r\\n                <div class=\\\"row\\\">\\r\\n                  <div class=\\\"col-6\\\">\\r\\n                    <button class=\\\"btn btn-primary float-left btn-block\\\" type=\\\"submit\\\" (click)=\\\"modalOpen(item.payload.key)\\\">Ürün ekle</button>\\r\\n                  </div>\\r\\n                  <div class=\\\"col-6\\\">\\r\\n                    <button class=\\\"btn btn-primary float-right btn-block\\\" type=\\\"submit\\\" [disabled]=\\\"item.payload.val().product == undefined\\\" (click)=\\\"sell(item.payload.key)\\\">Satış</button>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div bsModal #largeModal=\\\"bs-modal\\\" class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"myModalLabel\\\" aria-hidden=\\\"true\\\">\\r\\n  <div class=\\\"modal-dialog modal-lg\\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <h4 class=\\\"modal-title\\\">Masa ürün ekleme</h4>\\r\\n        <button type=\\\"button\\\" class=\\\"close\\\" (click)=\\\"largeModal.hide()\\\" aria-label=\\\"Close\\\">\\r\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <div class=\\\"card\\\">\\r\\n          <div class=\\\"card-header\\\">\\r\\n            <div class=\\\"input-group\\\">\\r\\n              <span class=\\\"input-group-prepend\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-search\\\"></i> Ara</button>\\r\\n              </span>\\r\\n              <input type=\\\"text\\\" id=\\\"input1-group2\\\" name=\\\"search\\\" class=\\\"form-control\\\" placeholder=\\\"Ürün\\\" [(ngModel)]=\\\"search\\\">  \\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"card-body\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n              <ng-container *ngFor=\\\"let item of products | filter:search\\\">\\r\\n                <div class=\\\"col-4\\\" style=\\\"cursor: pointer;\\\" (click)=\\\"selectProduct(item.payload.key)\\\" *ngIf=\\\"item.payload.val().restaurant1Stock > 0\\\">\\r\\n                  <div>{{item.payload.val().name}}({{item.payload.val().restaurant1Stock | number : '.2-2' }})</div>\\r\\n                </div>\\r\\n              </ng-container>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"card-footer\\\">\\r\\n            <table class=\\\"table table-bordered table-striped table-sm\\\" *ngIf=\\\"selectedProd != undefined \\\">\\r\\n              <thead>\\r\\n                <tr>\\r\\n                  <th></th>\\r\\n                  <th>Ürün adı</th>\\r\\n                  <th>Adet</th>\\r\\n                  <th>Fiyat</th>\\r\\n                </tr>\\r\\n              </thead>\\r\\n              <tbody>\\r\\n                <tr *ngFor=\\\"let item of selectedProd, let i = index\\\">\\r\\n                  <td (click)=\\\"countDecrease(i)\\\" style=\\\"display: table-cell;vertical-align: middle;cursor: pointer;text-align: center;\\\"><i class=\\\"cil-minus\\\" style=\\\"color:red\\\"></i></td>\\r\\n                  <td>{{item.data.name}}</td>\\r\\n                  <td>{{item.count}}</td>\\r\\n                  <td>{{item.totalPrice | number : '.2-2' }}</td>\\r\\n                </tr>\\r\\n              </tbody>\\r\\n            </table>      \\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"modal-footer\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"largeModal.hide()\\\">Vazgeç</button>\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"addProduct()\\\">Değişiklikleri kaydet</button>\\r\\n      </div>\\r\\n    </div><!-- /.modal-content -->\\r\\n  </div><!-- /.modal-dialog -->\\r\\n</div><!-- /.modal -->\\r\\n\";"]}